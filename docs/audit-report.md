# BNB 做市机器人审计与测试概览

## 1. 需求 → 实现 → 测试映射
详见 docs/mapping-table.md：列出 README / PROJECT_STATUS / 核心文档的功能与当前实现差距。

## 2. 模块实现现状
| 模块 | 现状 | 主要缺口 | 建议 |
| --- | --- | --- | --- |
| Wallet | HD 派生、安全导出已实现 | 钱包 CRUD 持久化/审计缺失 | 补充数据库记录及查询 API |
| Trade / DEX | 占位/示例代码 | 无真实交易、报价、Gas、Nonce | 优先实现 V2 单笔交易，逐步扩展 |
| Batch Operations | API/CLI 框架存在 | 执行逻辑缺失（买/卖/转账） | 建立批量执行引擎，加入失败重试 |
| Strategy | 空实现 | 无策略、无回测 | 定义接口、实现基础策略与回测 |
| Risk | 空实现 | 无白/黑名单、额度控制 | 实现风险规则并加测试 |
| Monitoring | 模拟数据 | 无真实指标/告警 | 接入 Prometheus、告警通道 |
| CLI | 日志统一、参数校验就绪 | 命令主体未实现 | 明确 TODO，随功能补齐 |
| Scripts | src/scripts/end-to-end-test.ts 最小流程 | 仅验证钱包/CLI | 功能上线后扩展完整 E2E |

## 3. 测试现状
- ✅ 已有：钱包单测、CSV 安全、API 导出、CLI stub、最小 E2E。
- ❌ 缺失：交易/批量/策略/风控/监控模块测试、主网分叉集成、性能测试。
- 建议：按功能落地先编写单元 & 集成测试；E2E 脚本逐步串联真实流程。

## 4. 重点风险
- 文档与实际实现严重不符，易误导使用者。
- 交易、批量、监控等核心能力尚未开发，生产就绪存在较大差距。
- 缺乏风控措施与日志审计，安全风险高。

## 5. 下一步建议
1. 更新 README / PROJECT_STATUS / 核心功能文档，准确描述现状。
2. 制定阶段交付计划（先交易、再批量、风控、监控、策略）。
3. 为每阶段功能配套测试（单元/集成/E2E）。
4. 引入 CI 测试与静态扫描，保障基础质量。
